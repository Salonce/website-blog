<!-- PAGE WRAPPER -->
<div class="lesson-read-page max-w-6xl mx-auto mt-16 px-4 sm:px-6 lg:px-8">

  @if (lesson) {

    <!-- LESSON TITLE -->
    <h1 class="text-3xl font-bold mb-6 leading-tight">{{ lesson.title }}</h1>

    <!-- LESSON CONTENT -->
    <div class="lesson-content space-y-6">

      @for (block of lesson.contentBlocks; track block.id) {

        @if (isTextBlock(block)) {
          <div class="content-block text-block">
            <div
              class="mt-2 prose max-w-none whitespace-pre-wrap"
              [innerHTML]="getSafeHtml(block.content)">
            </div>
          </div>
        }

        @if (block.type === 'IMAGE') {
          <div class="content-block image-block mt-4 text-gray-500 italic">
            Image block (not yet implemented)
          </div>
        }

        @if (block.type !== 'TEXT' && block.type !== 'IMAGE') {
          <div class="content-block mt-4 text-gray-500 italic">
            {{ block.type }} block
          </div>
        }

      }

    </div>

  } @else {

    <div class="flex justify-center items-center h-48">
      <p class="text-gray-500 italic text-lg animate-pulse">
        Loading lesson...
      </p>
    </div>

  }
</div>
